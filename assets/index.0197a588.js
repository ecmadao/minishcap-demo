var N=Object.defineProperty,w=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var S=(e,t,s)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,d=(e,t)=>{for(var s in t||(t={}))R.call(t,s)&&S(e,s,t[s]);if($)for(var s of $(t))I.call(t,s)&&S(e,s,t[s]);return e},f=(e,t)=>w(e,E(t));import{d as i,o as u,c as _,a,r as O,b as x,e as c,w as p,f as v,g as U,h as A,v as T,i as C,j as H,k as D,n as B,p as j,l as K,m as g,t as L,T as F,q as G,s as b,u as Y,x as M,y as P,F as V}from"./vendor.e93127e8.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};q();var h=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s};const z=i({name:"Button"}),J={class:"relative flex justify-center items-center cursor-pointer"},Q={class:"border-4 border-gray-500 bg-white custom-button"},W=a("div",{class:"w-full h-full button-shadow"},null,-1);function X(e,t,s,r,o,n){return u(),_("div",J,[a("button",Q,[O(e.$slots,"default")]),W])}var y=h(z,[["render",X]]);const Z={class:"absolute w-full top-0 left-0 flex justify-between"},ee=a("p",{class:"text-6xl"},"minishcap",-1),te={href:"https://github.com/ecmadao/minishcap-service",class:"text-xl inline-flex p-2 justify-center items-center"},se=v(" \xA0 GitHub ");function oe(e){return(t,s)=>{const r=x("font-awesome-icon");return u(),_("div",Z,[ee,a("div",null,[c(y,null,{default:p(()=>[a("a",te,[c(r,{icon:["fab","github"]}),se])]),_:1})])])}}const re=i({name:"Header"}),ne=i(f(d({},re),{setup:oe})),ae="https://minishcap-service.herokuapp.com/api/v1",ie=async e=>U.post(`${ae}/urls`,{urls:[e]}).then(t=>t.data),l={SET_SHORT_LINK:"setShortLink",SET_URL:"setUrl",SET_LOADING:"setLoading"},k={SHORTEN:"shorten"},ce=A({state:{url:"",loading:!1},actions:{async[k.SHORTEN]({state:e,commit:t}){var s;if(!e.loading&&!!T.isURL(e.url)){t(l.SET_LOADING,!0);try{const r=await ie({url:e.url,ttlInSeconds:Number("30")});t(l.SET_SHORT_LINK,(s=r.result)==null?void 0:s.pop()),t(l.SET_URL,"")}catch(r){console.error(r)}finally{t(l.SET_LOADING,!1)}}}},mutations:{[l.SET_SHORT_LINK](e,t){e.shortUrl=t},[l.SET_URL](e,t){e.url=t},[l.SET_LOADING](e,t){e.loading=t}},getters:{shortLink:e=>{var t;return(t=e.shortUrl)==null?void 0:t.short}}});const le=e=>(j("data-v-f7dd784e"),e=e(),K(),e),ue={class:"flex"},_e=le(()=>a("div",{class:"p-4 text-6xl"}," Shorten it ",-1));function de(e){return(t,s)=>(u(),_("div",ue,[a("div",{class:B([{error:t.error},"border-b-4 border-gray-400 py-2 mr-8 text-6xl"])},[C(a("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>t.url=r),class:"input appearance-none bg-transparent border-none placeholder-gray-400 focus:placeholder-gray-300 focus:outline-none",type:"url",placeholder:"Put your link here",onKeyup:s[1]||(s[1]=D((...r)=>t.convertToShortURL&&t.convertToShortURL(...r),["enter"]))},null,544),[[H,t.url]])],2),c(y,{onClick:t.convertToShortURL},{default:p(()=>[_e]),_:1},8,["onClick"])]))}const fe=i({name:"Form",data(){return{error:!1}},computed:{url:{get(){return this.$store.state.url},set(e){this.$store.commit(l.SET_URL,e)}}},methods:{convertToShortURL(){if(!T.isURL(this.$store.state.url)){this.setStatus(!0);return}this.$store.dispatch(k.SHORTEN)},setStatus(e){this.$data.error=e}},watch:{error:function(e){e&&setTimeout(()=>this.setStatus(!1),500)}}}),pe=i(f(d({},fe),{setup:de}));var he=h(pe,[["__scopeId","data-v-f7dd784e"]]);g.locale("zh-cn");const me=e=>g(e).format("YYYY-MM-DD HH:mm:ss"),ve=i({name:"ShortLink",data(){return{expireTime:function(e){var s;const t=(s=e.$store.state.shortUrl)==null?void 0:s.expiredAt;return t?`Expire at ${me(t)}`:"Never expire"}(this)}}}),ye={class:"flex flex-col items-baseline"},$e=["href"],Se=v(" \xA0\xA0 "),xe={class:"text-gray-400"};function Te(e,t,s,r,o,n){return u(),_("div",ye,[a("a",{class:"text-6xl text-left",href:e.$store.getters.shortLink},L(e.$store.getters.shortLink),9,$e),Se,a("span",xe,L(e.expireTime),1)])}var ge=h(ve,[["render",Te]]);const Le={class:"container"},be={key:1,class:"flex flex-col"},ke={class:"mr-auto mb-6"},Ne={class:"p-2 text-xl inline-flex justify-center items-center"},we=v(" \xA0 Back ");function Ee(e){return(t,s)=>{const r=x("font-awesome-icon");return u(),_("div",Le,[c(F,{appear:"",name:"slide-fade",mode:"out-in"},{default:p(()=>[t.$store.getters.shortLink?(u(),_("div",be,[a("div",ke,[c(y,{onClick:t.reset},{default:p(()=>[a("div",Ne,[c(r,{icon:["fas","chevron-circle-left"]}),we])]),_:1},8,["onClick"])]),c(ge)])):(u(),G(he,{key:0}))]),_:1})])}}const Re=i({name:"Content",methods:{reset(){this.$store.commit(l.SET_SHORT_LINK,null)}}}),Ie=i(f(d({},Re),{setup:Ee}));var Oe=h(Ie,[["__scopeId","data-v-0fa8174b"]]);const Ue={class:"relative w-full h-full flex justify-center items-center font-alata text-gray-600"},Ae=i({setup(e){return(t,s)=>(u(),_("div",Ue,[c(ne),c(Oe)]))}});b.add(Y);b.add(M);P(Ae).use(ce).component("font-awesome-icon",V).mount("#app");
